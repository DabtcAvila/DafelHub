# DafelHub Enterprise Environment Configuration
# Copy this file to .env and configure your values
# INTEGRATED: SecurityAgent + DatabaseAgent + APIAgent + FrontendAgent

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME=DafelHub
ENVIRONMENT=development
DEBUG=true
SECRET_KEY=your-secret-key-here-change-in-production-min-32-chars
VERSION=1.0.0
PROJECT_NAME="DafelHub Enterprise API"

# API Server Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_V1_STR=/api/v1

# =============================================================================
# SECURITY CONFIGURATION (SecurityAgent Integration)
# =============================================================================

# JWT Configuration
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-min-32-chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_MINUTES=10080

# Vault & Encryption (AES-256-GCM)
# Generate with: python -c "import secrets,base64; print(base64.b64encode(secrets.token_bytes(32)).decode())"
DAFELHUB_MASTER_KEY=
VAULT_MASTER_KEY=your-vault-encryption-key-change-in-production-32-chars
ENCRYPTION_KEY=your-encryption-key-for-vault-32-chars-minimum-length

# MFA Configuration (2FA Support)
MFA_ISSUER="DafelHub Enterprise"
MFA_BACKUP_CODES_COUNT=10
TOTP_SECRET_LENGTH=32

# RBAC & Security Features
PASSWORD_MIN_LENGTH=12
ACCOUNT_LOCKOUT_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30
SESSION_TIMEOUT_MINUTES=60
FORCE_PASSWORD_CHANGE_DAYS=90

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# =============================================================================
# DATABASE CONFIGURATION (DatabaseAgent Integration)
# =============================================================================

# Primary Database (PostgreSQL recommended for production)
DATABASE_URL=postgresql://username:password@localhost:5432/dafelhub
DATABASE_ECHO=false
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Database Connection Security
DB_SSL_MODE=require
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_CA_PATH=

# Connection Pool Settings
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000
DB_QUERY_TIMEOUT=60000
DB_HEALTH_CHECK_INTERVAL=30

# Database Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups

# Multi-Database Support
MYSQL_URL=mysql://username:password@localhost:3306/dafelhub_mysql
MONGODB_URL=mongodb://username:password@localhost:27017/dafelhub_mongo

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://localhost:6379/0
REDIS_TTL_BLACKLIST=604800  # 7 days in seconds
REDIS_TTL_PERMISSIONS=900   # 15 minutes in seconds

# =============================================================================
# CORS & NETWORKING
# =============================================================================
BACKEND_CORS_ORIGINS=http://localhost:3000,https://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# EMAIL CONFIGURATION  
# =============================================================================
SMTP_TLS=true
SMTP_PORT=587
SMTP_HOST=smtp.gmail.com
SMTP_USER=
SMTP_PASSWORD=
EMAILS_FROM_EMAIL=
EMAILS_FROM_NAME=DafelHub

# Email Templates
EMAIL_VERIFICATION_ENABLED=true
PASSWORD_RESET_TOKEN_EXPIRE_HOURS=1
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=24

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
LOG_FILE_PATH=./logs/dafelhub.log
LOG_MAX_SIZE_MB=100
LOG_BACKUP_COUNT=5

# Audit Logging (SecurityAgent)
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_FILE=./logs/audit.log

# Performance Monitoring
PERFORMANCE_METRICS_ENABLED=true
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# AI & AGENT CONFIGURATION
# =============================================================================

# API Keys for AI Models
OPENAI_API_KEY=
ANTHROPIC_API_KEY=
GEMINI_API_KEY=

# Agent Configuration
DEFAULT_AGENT_MODEL=claude-3-sonnet
AGENT_MAX_RETRIES=3
AGENT_TIMEOUT=30
AGENT_TEMPERATURE=0.7
AGENT_MAX_TOKENS=4096

# Agent Orchestration
MAX_CONCURRENT_AGENTS=5
AGENT_QUEUE_SIZE=100
AGENT_EXECUTION_TIMEOUT=300

# =============================================================================
# CONNECTION MANAGEMENT
# =============================================================================
MAX_CONNECTIONS=100
CONNECTION_TIMEOUT=30000
HEALTH_CHECK_INTERVAL=60000
AUTO_RECONNECT=true

# =============================================================================
# FILE STORAGE & UPLOADS
# =============================================================================
UPLOAD_PATH=./uploads
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
ALLOWED_EXTENSIONS=.pdf,.docx,.txt,.md,.xlsx,.csv,.json,.yaml,.yml

# File Storage Backend
STORAGE_BACKEND=local  # local, s3, gcs, azure
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_BUCKET_NAME=
AWS_REGION=us-east-1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_BACKGROUND_TASKS=true
ENABLE_WEBSOCKETS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true
ENABLE_MFA=true
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PASSWORD_RESET=true

# Development Features
ENABLE_DOCS=true
ENABLE_ADMIN=true
ENABLE_DEBUG_TOOLBAR=false
ENABLE_SQL_ECHO=false
ENABLE_PROFILING=false

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# GitHub Integration
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_WEBHOOK_SECRET=

# Slack Integration  
SLACK_BOT_TOKEN=
SLACK_WEBHOOK_URL=

# Notification Services
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# =============================================================================
# DOCKER & DEPLOYMENT
# =============================================================================
DOCKER_ENV=development
COMPOSE_PROJECT_NAME=dafelhub

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TEST_DATABASE_URL=sqlite:///./test_dafelhub.db
TEST_REDIS_URL=redis://localhost:6379/1

# Test User Configuration
TEST_USER_USERNAME=testuser
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=testpassword123!

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================
# Uncomment and modify these for production deployment:

# ENVIRONMENT=production
# DEBUG=false
# DATABASE_URL=postgresql://prod_user:secure_password@prod-db:5432/dafelhub_prod
# REDIS_URL=redis://prod-redis:6379/0
# SECRET_KEY=your-production-secret-key-min-64-characters-long
# CORS_ORIGINS=https://app.dafelhub.com,https://admin.dafelhub.com
# LOG_LEVEL=WARNING
# ENABLE_DEBUG_TOOLBAR=false